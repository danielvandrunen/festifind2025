{"error":"401 <html>\r\n<head><title>401 Authorization Required</title></head>\r\n<body>\r\n<center><h1>401 Authorization Required</h1></center>\r\n<hr><center>openresty/1.27.4</center>\r\n<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML=\"window.__CF$cv$params={r:'94b02b31cb048ea8',t:'MTc0OTEzMTczNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);\";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>\r\n</html>\r\n","level":"error","message":"Perplexity connection test failed","service":"perplexity-extractor","timestamp":"2025-06-05 15:55:37"}
{"error":"401 <html>\r\n<head><title>401 Authorization Required</title></head>\r\n<body>\r\n<center><h1>401 Authorization Required</h1></center>\r\n<hr><center>openresty/1.27.4</center>\r\n<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML=\"window.__CF$cv$params={r:'94b02c14ea669f81',t:'MTc0OTEzMTc3NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);\";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>\r\n</html>\r\n","level":"error","message":"Event extraction failed","service":"perplexity-extractor","stack":"Error: 401 <html>\r\n<head><title>401 Authorization Required</title></head>\r\n<body>\r\n<center><h1>401 Authorization Required</h1></center>\r\n<hr><center>openresty/1.27.4</center>\r\n<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML=\"window.__CF$cv$params={r:'94b02c14ea669f81',t:'MTc0OTEzMTc3NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);\";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>\r\n</html>\r\n\n    at APIError.generate (/Users/danieldrunen/FestiFind2025/services/perplexity-extractor/node_modules/openai/error.js:48:20)\n    at OpenAI.makeStatusError (/Users/danieldrunen/FestiFind2025/services/perplexity-extractor/node_modules/openai/core.js:302:33)\n    at OpenAI.makeRequest (/Users/danieldrunen/FestiFind2025/services/perplexity-extractor/node_modules/openai/core.js:346:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PerplexityClient.extractEventData (/Users/danieldrunen/FestiFind2025/services/perplexity-extractor/lib/perplexity-client.js:36:24)\n    at async /Users/danieldrunen/FestiFind2025/services/perplexity-extractor/routes/extract.js:143:27","timestamp":"2025-06-05 15:56:14","url":"https://testfestival.com"}
{"error":"Event extraction failed: 401 <html>\r\n<head><title>401 Authorization Required</title></head>\r\n<body>\r\n<center><h1>401 Authorization Required</h1></center>\r\n<hr><center>openresty/1.27.4</center>\r\n<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML=\"window.__CF$cv$params={r:'94b02c14ea669f81',t:'MTc0OTEzMTc3NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);\";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>\r\n</html>\r\n","level":"error","message":"HTML extraction failed","service":"perplexity-extractor","stack":"Error: Event extraction failed: 401 <html>\r\n<head><title>401 Authorization Required</title></head>\r\n<body>\r\n<center><h1>401 Authorization Required</h1></center>\r\n<hr><center>openresty/1.27.4</center>\r\n<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML=\"window.__CF$cv$params={r:'94b02c14ea669f81',t:'MTc0OTEzMTc3NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);\";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>\r\n</html>\r\n\n    at PerplexityClient.extractEventData (/Users/danieldrunen/FestiFind2025/services/perplexity-extractor/lib/perplexity-client.js:63:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/danieldrunen/FestiFind2025/services/perplexity-extractor/routes/extract.js:143:27","timestamp":"2025-06-05 15:56:14"}
{"error":"400 [\"At body -> response_format -> ResponseFormatText -> type: Input should be 'text'\", \"At body -> response_format -> ResponseFormatJSONSchema -> type: Input should be 'json_schema'\", \"At body -> response_format -> ResponseFormatJSONSchema -> json_schema: Field required\", \"At body -> response_format -> ResponseFormatRegex -> type: Input should be 'regex'\", \"At body -> response_format -> ResponseFormatRegex -> regex: Field required\"]","level":"error","message":"Event extraction failed","service":"perplexity-extractor","stack":"Error: 400 [\"At body -> response_format -> ResponseFormatText -> type: Input should be 'text'\", \"At body -> response_format -> ResponseFormatJSONSchema -> type: Input should be 'json_schema'\", \"At body -> response_format -> ResponseFormatJSONSchema -> json_schema: Field required\", \"At body -> response_format -> ResponseFormatRegex -> type: Input should be 'regex'\", \"At body -> response_format -> ResponseFormatRegex -> regex: Field required\"]\n    at APIError.generate (/Users/danieldrunen/FestiFind2025/services/perplexity-extractor/node_modules/openai/error.js:45:20)\n    at OpenAI.makeStatusError (/Users/danieldrunen/FestiFind2025/services/perplexity-extractor/node_modules/openai/core.js:302:33)\n    at OpenAI.makeRequest (/Users/danieldrunen/FestiFind2025/services/perplexity-extractor/node_modules/openai/core.js:346:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PerplexityClient.extractEventData (/Users/danieldrunen/FestiFind2025/services/perplexity-extractor/lib/perplexity-client.js:36:24)\n    at async /Users/danieldrunen/FestiFind2025/services/perplexity-extractor/routes/extract.js:143:27","timestamp":"2025-06-05 16:04:35","url":"https://tomorrowland.com"}
{"error":"Event extraction failed: 400 [\"At body -> response_format -> ResponseFormatText -> type: Input should be 'text'\", \"At body -> response_format -> ResponseFormatJSONSchema -> type: Input should be 'json_schema'\", \"At body -> response_format -> ResponseFormatJSONSchema -> json_schema: Field required\", \"At body -> response_format -> ResponseFormatRegex -> type: Input should be 'regex'\", \"At body -> response_format -> ResponseFormatRegex -> regex: Field required\"]","level":"error","message":"HTML extraction failed","service":"perplexity-extractor","stack":"Error: Event extraction failed: 400 [\"At body -> response_format -> ResponseFormatText -> type: Input should be 'text'\", \"At body -> response_format -> ResponseFormatJSONSchema -> type: Input should be 'json_schema'\", \"At body -> response_format -> ResponseFormatJSONSchema -> json_schema: Field required\", \"At body -> response_format -> ResponseFormatRegex -> type: Input should be 'regex'\", \"At body -> response_format -> ResponseFormatRegex -> regex: Field required\"]\n    at PerplexityClient.extractEventData (/Users/danieldrunen/FestiFind2025/services/perplexity-extractor/lib/perplexity-client.js:63:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /Users/danieldrunen/FestiFind2025/services/perplexity-extractor/routes/extract.js:143:27","timestamp":"2025-06-05 16:04:35"}
{"error":"Invalid URL","level":"error","message":"HTML extraction failed","service":"perplexity-extractor","stack":"TypeError: Invalid URL\n    at new URL (node:internal/url:775:36)\n    at transformToExtensionFormat (/Users/danieldrunen/FestiFind2025/services/perplexity-extractor/routes/extract.js:247:7)\n    at /Users/danieldrunen/FestiFind2025/services/perplexity-extractor/routes/extract.js:146:29\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-05 16:55:09"}
{"error":"Expected ',' or '}' after property value in JSON at position 277","level":"error","message":"Failed to parse Perplexity response","service":"perplexity-extractor","timestamp":"2025-06-05 21:08:30"}
